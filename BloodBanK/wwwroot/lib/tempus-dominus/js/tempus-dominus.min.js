!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports,require("@popperjs/core")):"function"==typeof define&&define.amd?define(["exports","@popperjs/core"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).tempusDominus={},t.Popper)}(this,function(t,e){"use strict";var h,u,s;(s=h=h||{}).seconds="seconds",s.minutes="minutes",s.hours="hours",s.date="date",s.month="month",s.year="year";class _ extends Date{constructor(){super(...arguments),this.locale="default"}setLocale(t){return this.locale=t,this}static convert(t){if(!t)throw"A date is required";return new _(t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds())}get clone(){return new _(this.year,this.month,this.date,this.hours,this.minutes,this.seconds,this.getMilliseconds()).setLocale(this.locale)}startOf(t){if(void 0===this[t])throw`Unit '${t}' is not valid`;switch(t){case"seconds":this.setMilliseconds(0);break;case"minutes":this.setSeconds(0,0);break;case"hours":this.setMinutes(0,0,0);break;case"date":this.setHours(0,0,0,0);break;case"weekDay":this.startOf(h.date),this.manipulate(0-this.weekDay,h.date);break;case"month":this.startOf(h.date),this.setDate(1);break;case"year":this.startOf(h.date),this.setMonth(0,1)}return this}endOf(t){if(void 0===this[t])throw`Unit '${t}' is not valid`;switch(t){case"seconds":this.setMilliseconds(999);break;case"minutes":this.setSeconds(59,999);break;case"hours":this.setMinutes(59,59,999);break;case"date":this.setHours(23,59,59,999);break;case"weekDay":this.startOf(h.date),this.manipulate(6-this.weekDay,h.date);break;case"month":this.endOf(h.date),this.manipulate(1,h.month),this.setDate(0);break;case"year":this.endOf(h.date),this.manipulate(1,h.year),this.setDate(0)}return this}manipulate(t,e){if(void 0===this[e])throw`Unit '${e}' is not valid`;return this[e]+=t,this}format(t,e=this.locale){return new Intl.DateTimeFormat(e,t).format(this)}isBefore(t,e){if(!e)return this.valueOf()<t.valueOf();if(void 0===this[e])throw`Unit '${e}' is not valid`;return this.clone.startOf(e).valueOf()<t.clone.startOf(e).valueOf()}isAfter(t,e){if(!e)return this.valueOf()>t.valueOf();if(void 0===this[e])throw`Unit '${e}' is not valid`;return this.clone.startOf(e).valueOf()>t.clone.startOf(e).valueOf()}isSame(t,e){if(!e)return this.valueOf()===t.valueOf();if(void 0===this[e])throw`Unit '${e}' is not valid`;return t=_.convert(t),this.clone.startOf(e).valueOf()===t.startOf(e).valueOf()}isBetween(t,e,s,i="()"){if(s&&void 0===this[s])throw`Unit '${s}' is not valid`;var a="("===i[0],i=")"===i[1];return(a?this.isAfter(t,s):!this.isBefore(t,s))&&(i?this.isBefore(e,s):!this.isAfter(e,s))||(a?this.isBefore(t,s):!this.isAfter(t,s))&&(i?this.isAfter(e,s):!this.isBefore(e,s))}parts(t=this.locale,e={dateStyle:"full",timeStyle:"long"}){const s={};return new Intl.DateTimeFormat(t,e).formatToParts(this).filter(t=>"literal"!==t.type).forEach(t=>s[t.type]=t.value),s}get seconds(){return this.getSeconds()}set seconds(t){this.setSeconds(t)}get secondsFormatted(){return this.seconds<10?`0${this.seconds}`:`${this.seconds}`}get minutes(){return this.getMinutes()}set minutes(t){this.setMinutes(t)}get minutesFormatted(){return this.minutes<10?`0${this.minutes}`:`${this.minutes}`}get hours(){return this.getHours()}set hours(t){this.setHours(t)}get hoursFormatted(){return this.hours<10?`0${this.hours}`:`${this.hours}`}get twelveHoursFormatted(){let t=this.hours;return 12<t&&(t-=12),0===t&&(t=12),t<10?`0${t}`:`${t}`}meridiem(t=this.locale){return this.hours<=12?"AM":"PM"}get date(){return this.getDate()}set date(t){this.setDate(t)}get dateFormatted(){return this.date<10?`0${this.date}`:`${this.date}`}get week(){const t=new Date(this.year,0,1);return t.setDate(t.getDate()+(1-t.getDay()%7)),Math.round((this.valueOf()-t.valueOf())/6048e5)+1}get weekDay(){return this.getDay()}get month(){return this.getMonth()}set month(t){this.setMonth(t)}get monthFormatted(){return this.month+1<10?`0${this.month}`:`${this.month}`}get year(){return this.getFullYear()}set year(t){this.setFullYear(t)}}class a extends Error{}const i="tempus-dominus";class p{}p.NAME=i,p.version="6.0.0-alpha1",p.dataKey="td",p.events=new class{constructor(){this.key=".td",this.change=`change${this.key}`,this.update=`update${this.key}`,this.error=`error${this.key}`,this.show=`show${this.key}`,this.hide=`hide${this.key}`,this.blur=`blur${this.key}`,this.focus=`focus${this.key}`,this.keyup=`keyup${this.key}`,this.keydown=`keydown${this.key}`}},p.css=new class{constructor(){this.widget=`${i}-widget`,this.calendarHeader="calendar-header",this.switch="picker-switch",this.toolbar="toolbar",this.noHighlight="no-highlight",this.sideBySide="timepicker-sbs",this.previous="previous",this.next="next",this.disabled="disabled",this.old="old",this.new="new",this.active="active",this.dateContainer="date-container",this.decadesContainer=`${this.dateContainer}-decades`,this.decade="decade",this.yearsContainer=`${this.dateContainer}-years`,this.year="year",this.monthsContainer=`${this.dateContainer}-months`,this.month="month",this.daysContainer=`${this.dateContainer}-days`,this.day="day",this.calendarWeeks="cw",this.dayOfTheWeek="dow",this.today="today",this.weekend="weekend",this.timeContainer="time-container",this.separator="separator",this.clockContainer=`${this.timeContainer}-clock`,this.hourContainer=`${this.timeContainer}-hour`,this.minuteContainer=`${this.timeContainer}-minute`,this.secondContainer=`${this.timeContainer}-second`,this.hour="hour",this.minute="minute",this.second="second",this.show="show",this.collapsing="td-collapsing",this.collapse="td-collapse",this.inline="inline"}},p.errorMessages=new class{constructor(){this.base="TD:",this.failedToSetInvalidDate="Failed to set invalid date",this.failedToParseInput="Failed parse input field"}unexpectedOption(t){const e=new a(`${this.base} Unexpected option: ${t} does not match a known option.`);throw e.code=1,e}unexpectedOptions(t){const e=new a(`${this.base}: ${t.join(", ")}`);throw e.code=1,e}unexpectedOptionValue(t,e,s){const i=new a(`${this.base} Unexpected option value: ${t} does not accept a value of "${e}". Valid values are: ${s.join(", ")}`);throw i.code=2,i}typeMismatch(t,e,s){const i=new a(`${this.base} Mismatch types: ${t} has a type of ${e} instead of the required ${s}`);throw i.code=3,i}numbersOutOfRage(t,e,s){const i=new a(`${this.base} ${t} expected an array of number between ${e} and ${s}.`);throw i.code=4,i}failedToParseDate(t,e){const s=new a(`${this.base} Could not correctly parse "${e}" to a date for option ${t}.`);throw s.code=5,s}mustProvideElement(){const t=new a(`${this.base} No element was provided.`);throw t.code=6,t}subscribeMismatch(){const t=new a(`${this.base} The subscribed events does not match the number of callbacks`);throw t.code=7,t}conflictingConfiguration(t){const e=new a(`${this.base} A configuration value conflicts with another rule. ${t}`);throw e.code=8,e}dateString(){console.warn(`${this.base} Using a string for date options is not recommended unless you specify an ISO string.`)}};const n={restrictions:{minDate:void 0,maxDate:void 0,disabledDates:[],enabledDates:[],daysOfWeekDisabled:[],disabledTimeIntervals:[],disabledHours:[],enabledHours:[]},display:{icons:{type:"icons",time:"fas fa-clock",date:"fas fa-calendar",up:"fas fa-arrow-up",down:"fas fa-arrow-down",previous:"fas fa-chevron-left",next:"fas fa-chevron-right",today:"fas fa-calendar-check",clear:"fas fa-trash",close:"fas fa-times"},sideBySide:!1,calendarWeeks:!1,viewMode:"calendar",toolbarPlacement:"bottom",keepOpen:!1,buttons:{today:!1,clear:!1,close:!1},components:{calendar:!0,date:!0,month:!0,year:!0,decades:!0,clock:!0,hours:!0,minutes:!0,seconds:!1,useTwentyfourHour:!1},inputFormat:void 0,inline:!1},stepping:1,useCurrent:!0,defaultDate:void 0,localization:{today:"Go to today",clear:"Clear selection",close:"Close the picker",selectMonth:"Select Month",previousMonth:"Previous Month",nextMonth:"Next Month",selectYear:"Select Year",previousYear:"Previous Year",nextYear:"Next Year",selectDecade:"Select Decade",previousDecade:"Previous Decade",nextDecade:"Next Decade",previousCentury:"Previous Century",nextCentury:"Next Century",pickHour:"Pick Hour",incrementHour:"Increment Hour",decrementHour:"Decrement Hour",pickMinute:"Pick Minute",incrementMinute:"Increment Minute",decrementMinute:"Decrement Minute",pickSecond:"Pick Second",incrementSecond:"Increment Second",decrementSecond:"Decrement Second",togglePeriod:"Toggle Period",selectTime:"Select Time",selectDate:"Select Date",dayViewHeaderFormat:"long",locale:"default"},keepInvalid:!1,debug:!1,allowInputToggle:!1,viewDate:new _,multipleDates:!1,multipleDatesSeparator:"; ",promptTimeOnDateChange:!1,promptTimeOnDateChangeTransitionDelay:200},m=[{name:"calendar",className:p.css.daysContainer,unit:h.month,step:1},{name:"months",className:p.css.monthsContainer,unit:h.year,step:1},{name:"years",className:p.css.yearsContainer,unit:h.year,step:10},{name:"decades",className:p.css.decadesContainer,unit:h.year,step:100}];class o{constructor(){this.getTransitionDurationFromElement=t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:s}=window.getComputedStyle(t);var i=Number.parseFloat(e),t=Number.parseFloat(s);return i||t?(e=e.split(",")[0],s=s.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(s))):0}}toggle(t){t.classList.contains(p.css.show)?this.hide(t):this.show(t)}show(t){t.classList.contains(p.css.collapsing)||t.classList.contains(p.css.show)||(t.style.height="0",t.classList.remove(p.css.collapse),t.classList.add(p.css.collapsing),this.timeOut=setTimeout(()=>{t.classList.remove(p.css.collapsing),t.classList.add(p.css.collapse,p.css.show),t.style.height="",this.timeOut=null},this.getTransitionDurationFromElement(t)),t.style.height=`${t.scrollHeight}px`)}hide(t){!t.classList.contains(p.css.collapsing)&&t.classList.contains(p.css.show)&&(t.style.height=`${t.getBoundingClientRect().height}px`,t.offsetHeight,t.classList.remove(p.css.collapse,p.css.show),t.classList.add(p.css.collapsing),t.style.height="",this.timeOut=setTimeout(()=>{t.classList.remove(p.css.collapsing),t.classList.add(p.css.collapse),this.timeOut=null},this.getTransitionDurationFromElement(t)))}}class c{constructor(t){this._context=t,this.collapse=new o}do(e,s){const i=e.currentTarget;if(i.classList.contains(p.css.disabled))return!1;s=s||i.dataset.action;const a=(this._context.dates.lastPicked||this._context._viewDate).clone;var n=(t,e=1)=>{e=a.manipulate(e,t);this._context._validation.isValid(e,t)&&this._context.dates._setValue(e,this._context.dates.lastPickedIndex)};switch(s){case u.next:case u.previous:var{unit:o,step:c}=m[this._context._currentViewMode];s===u.next?this._context._viewDate.manipulate(c,o):this._context._viewDate.manipulate(-1*c,o),this._context._viewUpdate(o),this._context._display._showMode();break;case u.pickerSwitch:this._context._display._showMode(1),this._context._viewUpdate(m[this._context._currentViewMode].unit),this._context._display._updateCalendarHeader();break;case u.selectMonth:case u.selectYear:case u.selectDecade:var r=+i.getAttribute("data-value");switch(s){case u.selectMonth:this._context._viewDate.month=r,this._context._viewUpdate(h.month);break;case u.selectYear:case u.selectDecade:this._context._viewDate.year=r,this._context._viewUpdate(h.year)}this._context._currentViewMode===this._context._minViewModeNumber?(this._context.dates._setValue(this._context._viewDate,this._context.dates.lastPickedIndex),this._context._options.display.inline||this._context._display.hide()):this._context._display._showMode(-1);break;case u.selectDay:const l=this._context._viewDate.clone;i.classList.contains(p.css.old)&&l.manipulate(-1,h.month),i.classList.contains(p.css.new)&&l.manipulate(1,h.month),l.date=+i.innerText;this._context._options.multipleDates?-1!==(o=this._context.dates.pickedIndex(l,h.date))?this._context.dates._setValue(null,o):this._context.dates._setValue(l,this._context.dates.lastPickedIndex+1):this._context.dates._setValue(l,this._context.dates.lastPickedIndex),this._context._display._hasTime||this._context._options.display.keepOpen||this._context._options.display.inline||this._context._options.multipleDates||this._context._display.hide();break;case u.selectHour:var d=+i.getAttribute("data-value");a.hours=d,this._context.dates._setValue(a,this._context.dates.lastPickedIndex),!this._context._options.display.components.useTwentyfourHour||this._context._options.display.components.minutes||this._context._options.display.keepOpen||this._context._options.display.inline?this.do(e,u.showClock):this._context._display.hide();break;case u.selectMinute:a.minutes=+i.innerText,this._context.dates._setValue(a,this._context.dates.lastPickedIndex),!this._context._options.display.components.useTwentyfourHour||this._context._options.display.components.seconds||this._context._options.display.keepOpen||this._context._options.display.inline?this.do(e,u.showClock):this._context._display.hide();break;case u.selectSecond:a.seconds=+i.innerText,this._context.dates._setValue(a,this._context.dates.lastPickedIndex),!this._context._options.display.components.useTwentyfourHour||this._context._options.display.keepOpen||this._context._options.display.inline?this.do(e,u.showClock):this._context._display.hide();break;case u.incrementHours:n(h.hours);break;case u.incrementMinutes:n(h.minutes,this._context._options.stepping);break;case u.incrementSeconds:n(h.seconds);break;case u.decrementHours:n(h.hours,-1);break;case u.decrementMinutes:n(h.minutes,-1*this._context._options.stepping);break;case u.decrementSeconds:n(h.seconds,-1);break;case u.togglePeriod:n(h.hours,12<=this._context.dates.lastPicked.hours?-12:12);break;case u.togglePicker:this._context._display.widget.querySelectorAll(`.${p.css.dateContainer}, .${p.css.timeContainer}`).forEach(t=>this.collapse.toggle(t)),i.getAttribute("title")===this._context._options.localization.selectDate?(i.setAttribute("title",this._context._options.localization.selectTime),i.innerHTML=this._context._display._iconTag(this._context._options.display.icons.time).outerHTML,this._context._display._updateCalendarHeader()):(i.setAttribute("title",this._context._options.localization.selectDate),i.innerHTML=this._context._display._iconTag(this._context._options.display.icons.date).outerHTML,this.do(e,u.showClock),this._context._display._update("clock"));break;case u.showClock:case u.showHours:case u.showMinutes:case u.showSeconds:this._context._display.widget.querySelectorAll(`.${p.css.timeContainer} > div`).forEach(t=>t.style.display="none");let t="";switch(s){case u.showClock:t=p.css.clockContainer,this._context._display._update("clock");break;case u.showHours:t=p.css.hourContainer,this._context._display._update(h.hours);break;case u.showMinutes:t=p.css.minuteContainer,this._context._display._update(h.minutes);break;case u.showSeconds:t=p.css.secondContainer,this._context._display._update(h.seconds)}this._context._display.widget.getElementsByClassName(t)[0].style.display="grid";break;case u.clear:this._context.dates._setValue(null),this._context._display._updateCalendarHeader();break;case u.close:this._context._display.hide();break;case u.today:d=(new _).setLocale(this._context._options.localization.locale);this._context._viewDate=d,this._context._validation.isValid(d,h.date)&&this._context.dates._setValue(d,this._context.dates.lastPickedIndex)}}}(s=u=u||{}).next="next",s.previous="previous",s.pickerSwitch="pickerSwitch",s.selectMonth="selectMonth",s.selectYear="selectYear",s.selectDecade="selectDecade",s.selectDay="selectDay",s.selectHour="selectHour",s.selectMinute="selectMinute",s.selectSecond="selectSecond",s.incrementHours="incrementHours",s.incrementMinutes="incrementMinutes",s.incrementSeconds="incrementSeconds",s.decrementHours="decrementHours",s.decrementMinutes="decrementMinutes",s.decrementSeconds="decrementSeconds",s.togglePeriod="togglePeriod",s.togglePicker="togglePicker",s.showClock="showClock",s.showHours="showHours",s.showMinutes="showMinutes",s.showSeconds="showSeconds",s.clear="clear",s.close="close",s.today="today";class r{constructor(t){this._context=t}get _picker(){const e=document.createElement("div");if(e.classList.add(p.css.daysContainer),e.append(...this._daysOfTheWeek()),this._context._options.display.calendarWeeks){const t=document.createElement("div");t.classList.add(p.css.calendarWeeks,p.css.noHighlight),e.appendChild(t)}for(let t=0;t<42;t++){if(0!==t&&t%7==0&&this._context._options.display.calendarWeeks){const i=document.createElement("div");i.classList.add(p.css.calendarWeeks,p.css.noHighlight),e.appendChild(i)}const s=document.createElement("div");s.setAttribute("data-action",u.selectDay),e.appendChild(s)}return e}_update(){const t=this._context._display.widget.getElementsByClassName(p.css.daysContainer)[0],[e,s,i]=t.parentElement.getElementsByClassName(p.css.calendarHeader)[0].getElementsByTagName("div");s.setAttribute(p.css.daysContainer,this._context._viewDate.format({month:this._context._options.localization.dayViewHeaderFormat})),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,h.month),h.month)?e.classList.remove(p.css.disabled):e.classList.add(p.css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,h.month),h.month)?i.classList.remove(p.css.disabled):i.classList.add(p.css.disabled);let a=this._context._viewDate.clone.startOf(h.month).startOf("weekDay").manipulate(12,h.hours);t.querySelectorAll(`[data-action="${u.selectDay}"], .${p.css.calendarWeeks}`).forEach((t,e)=>{if(this._context._options.display.calendarWeeks&&t.classList.contains(p.css.calendarWeeks))return"#"===t.innerText?void 0:void(t.innerText=`${a.week}`);let s=[];s.push(p.css.day),a.isBefore(this._context._viewDate,h.month)&&s.push(p.css.old),a.isAfter(this._context._viewDate,h.month)&&s.push(p.css.new),!this._context._unset&&this._context.dates.isPicked(a,h.date)&&s.push(p.css.active),this._context._validation.isValid(a,h.date)||s.push(p.css.disabled),a.isSame(new _,h.date)&&s.push(p.css.today),0!==a.weekDay&&6!==a.weekDay||s.push(p.css.weekend),t.classList.remove(...t.classList),t.classList.add(...s),t.setAttribute("data-value",`${a.year}-${a.monthFormatted}-${a.dateFormatted}`),t.innerText=`${a.date}`,a.manipulate(1,h.date)})}_daysOfTheWeek(){let e=this._context._viewDate.clone.startOf("weekDay").startOf(h.date);const s=[];if(document.createElement("div"),this._context._options.display.calendarWeeks){const t=document.createElement("div");t.classList.add(p.css.calendarWeeks,p.css.noHighlight),t.innerText="#",s.push(t)}for(let t=0;t<7;t++){const i=document.createElement("div");i.classList.add(p.css.dayOfTheWeek,p.css.noHighlight),i.innerText=e.format({weekday:"short"}),e.manipulate(1,h.date),s.push(i)}return s}}class d{constructor(t){this._context=t}get _picker(){const e=document.createElement("div");e.classList.add(p.css.monthsContainer);for(let t=0;t<12;t++){const s=document.createElement("div");s.setAttribute("data-action",u.selectMonth),e.appendChild(s)}return e}_update(){const t=this._context._display.widget.getElementsByClassName(p.css.monthsContainer)[0],[e,s,i]=t.parentElement.getElementsByClassName(p.css.calendarHeader)[0].getElementsByTagName("div");s.setAttribute(p.css.monthsContainer,this._context._viewDate.format({year:"numeric"})),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,h.year),h.year)?e.classList.remove(p.css.disabled):e.classList.add(p.css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,h.year),h.year)?i.classList.remove(p.css.disabled):i.classList.add(p.css.disabled);let a=this._context._viewDate.clone.startOf(h.year);t.querySelectorAll(`[data-action="${u.selectMonth}"]`).forEach((t,e)=>{let s=[];s.push(p.css.month),!this._context._unset&&this._context.dates.isPicked(a,h.month)&&s.push(p.css.active),this._context._validation.isValid(a,h.month)||s.push(p.css.disabled),t.classList.remove(...t.classList),t.classList.add(...s),t.setAttribute("data-value",`${e}`),t.innerText=`${a.format({month:"short"})}`,a.manipulate(1,h.month)})}}class l{constructor(t){this._dates=[],this._context=t}get picked(){return this._dates}get lastPicked(){return this._dates[this.lastPickedIndex]}get lastPickedIndex(){return 0===this._dates.length?0:this._dates.length-1}add(t){this._dates.push(t)}isPicked(e,t){if(!t)return void 0!==this._dates.find(t=>t===e);const s=l.getFormatByUnit(t);let i=e.format(s);return void 0!==this._dates.map(t=>t.format(s)).find(t=>t===i)}pickedIndex(t,e){if(!e)return this._dates.indexOf(t);const s=l.getFormatByUnit(e);t=t.format(s);return this._dates.map(t=>t.format(s)).indexOf(t)}clear(){this._context._unset=!0,this._context._triggerEvent({type:p.events.change,date:void 0,oldDate:this.lastPicked,isClear:!0,isValid:!0}),this._dates=[]}static getStartEndYear(t,e){var s=t/10,t=Math.floor(e/t)*t;return[t,t+9*s,Math.floor(e/s)*s]}_setValue(e,t){var s=void 0===t,i=!e&&s;let a=this._context._unset?null:this._dates[t];!a&&!this._context._unset&&s&&i&&(a=this.lastPicked);s=()=>{if(this._context._input){let t=(null==e?void 0:e.format(this._context._options.display.inputFormat))||"";this._context._options.multipleDates&&(t=this._dates.map(t=>t.format(this._context._options.display.inputFormat)).join(this._context._options.multipleDatesSeparator)),this._context._input.value!=t&&(this._context._input.value=t)}};return e?(t=t||0,e=e.clone,1!==this._context._options.stepping&&(e.minutes=Math.round(e.minutes/this._context._options.stepping)*this._context._options.stepping,e.seconds=0),this._context._validation.isValid(e)?(this._dates[t]=e,this._context._viewDate=e.clone,s(),this._context._unset=!1,this._context._display._update("all"),void this._context._triggerEvent({type:p.events.change,date:e,oldDate:a,isClear:i,isValid:!0})):(this._context._options.keepInvalid&&(this._dates[t]=e,this._context._viewDate=e.clone,s(),this._context._triggerEvent({type:p.events.change,date:e,oldDate:a,isClear:i,isValid:!1})),void this._context._triggerEvent({type:p.events.error,reason:p.errorMessages.failedToSetInvalidDate,date:e,oldDate:a}))):(!this._context._options.multipleDates||1===this._dates.length||i?(this._context._unset=!0,this._dates=[]):this._dates.splice(t,1),this._context._triggerEvent({type:p.events.change,date:void 0,oldDate:a,isClear:i,isValid:!0}),s(),void this._context._display._update("all"))}static getFormatByUnit(t){switch(t){case"date":return{dateStyle:"short"};case"month":return{month:"numeric",year:"numeric"};case"year":return{year:"numeric"}}}}class y{constructor(t){this._context=t}get _picker(){const e=document.createElement("div");e.classList.add(p.css.yearsContainer);for(let t=0;t<12;t++){const s=document.createElement("div");s.setAttribute("data-action",u.selectYear),e.appendChild(s)}return e}_update(){l.getStartEndYear(100,this._context._viewDate.year),this._startYear=this._context._viewDate.clone.manipulate(-1,h.year),this._endYear=this._context._viewDate.clone.manipulate(10,h.year);const t=this._context._display.widget.getElementsByClassName(p.css.yearsContainer)[0],[e,s,i]=t.parentElement.getElementsByClassName(p.css.calendarHeader)[0].getElementsByTagName("div");s.setAttribute(p.css.yearsContainer,`${this._startYear.year}-${this._endYear.year}`),this._context._validation.isValid(this._startYear,h.year)?e.classList.remove(p.css.disabled):e.classList.add(p.css.disabled),this._context._validation.isValid(this._endYear,h.year)?i.classList.remove(p.css.disabled):i.classList.add(p.css.disabled);let a=this._context._viewDate.clone.startOf(h.year).manipulate(-1,h.year);t.querySelectorAll(`[data-action="${u.selectYear}"]`).forEach((t,e)=>{let s=[];s.push(p.css.year),!this._context._unset&&this._context.dates.isPicked(a,h.year)&&s.push(p.css.active),this._context._validation.isValid(a,h.year)||s.push(p.css.disabled),t.classList.remove(...t.classList),t.classList.add(...s),t.setAttribute("data-value",`${a.year}`),t.innerText=`${a.year}`,a.manipulate(1,h.year)})}}class v{constructor(t){this._context=t}get _picker(){const e=document.createElement("div");e.classList.add(p.css.decadesContainer);for(let t=0;t<12;t++){const s=document.createElement("div");s.setAttribute("data-action",u.selectDecade),e.appendChild(s)}return e}_update(){var[t,e]=l.getStartEndYear(100,this._context._viewDate.year);this._startDecade=this._context._viewDate.clone.startOf(h.year),this._startDecade.year=t,this._endDecade=this._context._viewDate.clone.startOf(h.year),this._endDecade.year=e;const s=this._context._display.widget.getElementsByClassName(p.css.decadesContainer)[0],[n,i,a]=s.parentElement.getElementsByClassName(p.css.calendarHeader)[0].getElementsByTagName("div");i.setAttribute(p.css.decadesContainer,`${this._startDecade.year}-${this._endDecade.year}`),this._context._validation.isValid(this._startDecade,h.year)?n.classList.remove(p.css.disabled):n.classList.add(p.css.disabled),this._context._validation.isValid(this._endDecade,h.year)?a.classList.remove(p.css.disabled):a.classList.add(p.css.disabled);const o=this._context.dates.picked.map(t=>t.year);s.querySelectorAll(`[data-action="${u.selectDecade}"]`).forEach((t,e)=>{if(0===e)return t.classList.add(p.css.old),this._startDecade.year-10<0?(t.textContent=" ",n.classList.add(p.css.disabled),t.classList.add(p.css.disabled),void t.setAttribute("data-value","")):(t.innerText=`${this._startDecade.year-10}`,void t.setAttribute("data-value",`${this._startDecade.year+6}`));let s=[];s.push(p.css.decade);const i=this._startDecade.year,a=this._startDecade.year+9;!this._context._unset&&0<o.filter(t=>t>=i&&t<=a).length&&s.push(p.css.active),t.classList.remove(...t.classList),t.classList.add(...s),t.setAttribute("data-value",`${this._startDecade.year+6}`),t.innerText=`${this._startDecade.year}`,this._startDecade.manipulate(10,h.year)})}}class x{constructor(t){this._context=t}get _picker(){const t=document.createElement("div");return t.classList.add(p.css.clockContainer),t.append(...this._grid()),t}_update(){const t=this._context._display.widget.getElementsByClassName(p.css.clockContainer)[0],e=(this._context.dates.lastPicked||this._context._viewDate).clone;let s=0;if(t.querySelectorAll(".disabled").forEach(t=>t.classList.remove(p.css.disabled)),this._context._options.display.components.hours&&(s++,this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,h.hours),h.hours)||t.querySelector(`[data-action=${u.incrementHours}]`).classList.add(p.css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,h.hours),h.hours)||t.querySelector(`[data-action=${u.decrementHours}]`).classList.add(p.css.disabled),t.querySelector(`[data-time-component=${h.hours}]`).innerText=this._context._options.display.components.useTwentyfourHour?e.hoursFormatted:e.twelveHoursFormatted),this._context._options.display.components.minutes&&(s++,this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,h.minutes),h.minutes)||t.querySelector(`[data-action=${u.incrementMinutes}]`).classList.add(p.css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,h.minutes),h.minutes)||t.querySelector(`[data-action=${u.decrementMinutes}]`).classList.add(p.css.disabled),t.querySelector(`[data-time-component=${h.minutes}]`).innerText=e.minutesFormatted),this._context._options.display.components.seconds&&(s++,this._context._validation.isValid(this._context._viewDate.clone.manipulate(1,h.seconds),h.seconds)||t.querySelector(`[data-action=${u.incrementSeconds}]`).classList.add(p.css.disabled),this._context._validation.isValid(this._context._viewDate.clone.manipulate(-1,h.seconds),h.seconds)||t.querySelector(`[data-action=${u.decrementSeconds}]`).classList.add(p.css.disabled),t.querySelector(`[data-time-component=${h.seconds}]`).innerText=e.secondsFormatted),!this._context._options.display.components.useTwentyfourHour){s++;const i=t.querySelector(`[data-action=${u.togglePeriod}]`);i.innerText=e.meridiem(),this._context._validation.isValid(e.clone.manipulate(12<=e.hours?-12:12,h.hours))?i.classList.remove(p.css.disabled):i.classList.add(p.css.disabled)}t.classList.add(`clock-columns-${s}`)}_grid(){const s=[],i=[],a=[],e=document.createElement("div"),n=this._context._display._iconTag(this._context._options.display.icons.up),o=this._context._display._iconTag(this._context._options.display.icons.down);e.classList.add(p.css.separator,p.css.noHighlight);const c=e.cloneNode(!0);c.innerHTML=":";var r=(t=!1)=>(t?c:e).cloneNode(!0);if(this._context._options.display.components.hours){let t=document.createElement("div");t.setAttribute("title",this._context._options.localization.incrementHour),t.setAttribute("data-action",u.incrementHours),t.appendChild(n.cloneNode(!0)),s.push(t),t=document.createElement("div"),t.setAttribute("title",this._context._options.localization.pickHour),t.setAttribute("data-action",u.showHours),t.setAttribute("data-time-component",h.hours),i.push(t),t=document.createElement("div"),t.setAttribute("title",this._context._options.localization.decrementHour),t.setAttribute("data-action",u.decrementHours),t.appendChild(o.cloneNode(!0)),a.push(t)}if(this._context._options.display.components.minutes){this._context._options.display.components.hours&&(s.push(r()),i.push(r(!0)),a.push(r()));let t=document.createElement("div");t.setAttribute("title",this._context._options.localization.incrementMinute),t.setAttribute("data-action",u.incrementMinutes),t.appendChild(n.cloneNode(!0)),s.push(t),t=document.createElement("div"),t.setAttribute("title",this._context._options.localization.pickMinute),t.setAttribute("data-action",u.showMinutes),t.setAttribute("data-time-component",h.minutes),i.push(t),t=document.createElement("div"),t.setAttribute("title",this._context._options.localization.decrementMinute),t.setAttribute("data-action",u.decrementMinutes),t.appendChild(o.cloneNode(!0)),a.push(t)}if(this._context._options.display.components.seconds){this._context._options.display.components.minutes&&(s.push(r()),i.push(r(!0)),a.push(r()));let t=document.createElement("div");t.setAttribute("title",this._context._options.localization.incrementSecond),t.setAttribute("data-action",u.incrementSeconds),t.appendChild(n.cloneNode(!0)),s.push(t),t=document.createElement("div"),t.setAttribute("title",this._context._options.localization.pickSecond),t.setAttribute("data-action",u.showSeconds),t.setAttribute("data-time-component",h.seconds),i.push(t),t=document.createElement("div"),t.setAttribute("title",this._context._options.localization.decrementSecond),t.setAttribute("data-action",u.decrementSeconds),t.appendChild(o.cloneNode(!0)),a.push(t)}if(!this._context._options.display.components.useTwentyfourHour){let t=r();s.push(t);let e=document.createElement("button");e.setAttribute("title",this._context._options.localization.togglePeriod),e.setAttribute("data-action",u.togglePeriod),e.setAttribute("tabindex","-1"),t=document.createElement("div"),t.classList.add(p.css.noHighlight),t.appendChild(e),i.push(t),t=r(),a.push(t)}return[...s,...i,...a]}}class g{constructor(t){this._context=t}get _picker(){const e=document.createElement("div");e.classList.add(p.css.hourContainer);for(let t=0;t<(this._context._options.display.components.useTwentyfourHour?24:12);t++){const s=document.createElement("div");s.setAttribute("data-action",u.selectHour),e.appendChild(s)}return e}_update(){const t=this._context._display.widget.getElementsByClassName(p.css.hourContainer)[0];let i=this._context._viewDate.clone.startOf(h.date);t.querySelectorAll(`[data-action="${u.selectHour}"]`).forEach((t,e)=>{let s=[];s.push(p.css.hour),this._context._validation.isValid(i,h.hours)||s.push(p.css.disabled),t.classList.remove(...t.classList),t.classList.add(...s),t.setAttribute("data-value",`${i.hours}`),t.innerText=this._context._options.display.components.useTwentyfourHour?i.hoursFormatted:i.twelveHoursFormatted,i.manipulate(1,h.hours)})}}class b{constructor(t){this._context=t}get _picker(){const e=document.createElement("div");e.classList.add(p.css.minuteContainer);var s=1===this._context._options.stepping?5:this._context._options.stepping;for(let t=0;t<60/s;t++){const i=document.createElement("div");i.setAttribute("data-action",u.selectMinute),e.appendChild(i)}return e}_update(){const t=this._context._display.widget.getElementsByClassName(p.css.minuteContainer)[0];let i=this._context._viewDate.clone.startOf(h.hours),a=1===this._context._options.stepping?5:this._context._options.stepping;t.querySelectorAll(`[data-action="${u.selectMinute}"]`).forEach((t,e)=>{let s=[];s.push(p.css.minute),this._context._validation.isValid(i,h.minutes)||s.push(p.css.disabled),t.classList.remove(...t.classList),t.classList.add(...s),t.setAttribute("data-value",`${i.minutes}`),t.innerText=i.minutesFormatted,i.manipulate(a,h.minutes)})}}class f{constructor(t){this._context=t}get _picker(){const e=document.createElement("div");e.classList.add(p.css.secondContainer);for(let t=0;t<12;t++){const s=document.createElement("div");s.setAttribute("data-action",u.selectSecond),e.appendChild(s)}return e}_update(){const t=this._context._display.widget.getElementsByClassName(p.css.secondContainer)[0];let i=this._context._viewDate.clone.startOf(h.minutes);t.querySelectorAll(`[data-action="${u.selectSecond}"]`).forEach((t,e)=>{let s=[];s.push(p.css.second),this._context._validation.isValid(i,h.seconds)||s.push(p.css.disabled),t.classList.remove(...t.classList),t.classList.add(...s),t.setAttribute("data-value",`${i.seconds}`),t.innerText=i.secondsFormatted,i.manipulate(5,h.seconds)})}}class w{constructor(t){this._isVisible=!1,this._documentClickEvent=t=>{!this._isVisible||t.composedPath().includes(this.widget)||null!==(t=t.composedPath())&&void 0!==t&&t.includes(this._context._element)||this._context._options.display.keepOpen&&this._context._options.debug&&window.debug||this.hide()},this._actionsClickEvent=t=>{this._context._action.do(t)},this._context=t,this._dateDisplay=new r(t),this._monthDisplay=new d(t),this._yearDisplay=new y(t),this._decadeDisplay=new v(t),this._timeDisplay=new x(t),this._hourDisplay=new g(t),this._minuteDisplay=new b(t),this._secondDisplay=new f(t),this._widget=void 0}get widget(){return this._widget}get isVisible(){return this._isVisible}_update(t){if(this.widget)switch(t){case h.seconds:this._secondDisplay._update();break;case h.minutes:this._minuteDisplay._update();break;case h.hours:this._hourDisplay._update();break;case h.date:this._dateDisplay._update();break;case h.month:this._monthDisplay._update();break;case h.year:this._yearDisplay._update();break;case"clock":this._timeDisplay._update(),this._update(h.hours),this._update(h.minutes),this._update(h.seconds);break;case"calendar":this._update(h.date),this._update(h.year),this._update(h.month),this._decadeDisplay._update(),this._updateCalendarHeader();break;case"all":this._hasTime&&this._update("clock"),this._hasDate&&this._update("calendar")}}show(){var s;if(null==this.widget){if(this._context._options.useCurrent&&!this._context._options.defaultDate){const i=(new _).setLocale(this._context._options.localization.locale);if(!this._context._options.keepInvalid){let t=0,e=1;for(null!==(s=this._context._options.restrictions.maxDate)&&void 0!==s&&s.isBefore(i)&&(e=-1);!(this._context._validation.isValid(i)||(i.manipulate(e,h.date),31<t));)t++}this._context.dates._setValue(i)}this._context._options.defaultDate&&this._context.dates._setValue(this._context._options.defaultDate),this._buildWidget(),this._hasDate&&this._showMode(),this._context._options.display.inline?this._context._element.appendChild(this.widget):(document.body.appendChild(this.widget),this._popperInstance=e.createPopper(this._context._element,this.widget,{modifiers:[{name:"offset",options:{offset:[2,8]}},{name:"eventListeners",enabled:!0}],placement:"auto"})),"clock"==this._context._options.display.viewMode&&this._context._action.do({currentTarget:this.widget.querySelector(`.${p.css.timeContainer}`)},u.showClock),this.widget.querySelectorAll("[data-action]").forEach(t=>t.addEventListener("click",this._actionsClickEvent)),this._context._options.display.sideBySide&&(this._timeDisplay._update(),this.widget.getElementsByClassName(p.css.clockContainer)[0].style.display="grid")}this.widget.classList.add(p.css.show),this._context._options.display.inline||(this._popperInstance.update(),document.addEventListener("click",this._documentClickEvent)),this._context._triggerEvent({type:p.events.show}),this._isVisible=!0}_showMode(e){if(this.widget){if(e){var s=Math.max(this._context._minViewModeNumber,Math.min(3,this._context._currentViewMode+e));if(this._context._currentViewMode==s)return;this._context._currentViewMode=s}this.widget.querySelectorAll(`.${p.css.dateContainer} > div:not(.${p.css.calendarHeader}), .${p.css.timeContainer} > div`).forEach(t=>t.style.display="none");s=m[this._context._currentViewMode];let t=this.widget.querySelector(`.${s.className}`);switch(s.className){case p.css.decadesContainer:this._decadeDisplay._update();break;case p.css.yearsContainer:this._yearDisplay._update();break;case p.css.monthsContainer:this._monthDisplay._update();break;case p.css.daysContainer:this._dateDisplay._update()}t.style.display="grid",this._updateCalendarHeader()}}_updateCalendarHeader(){var t=[...this.widget.querySelector(`.${p.css.dateContainer} div[style*="display: grid"]`).classList].find(t=>t.startsWith(p.css.dateContainer));const[e,s,i]=this._context._display.widget.getElementsByClassName(p.css.calendarHeader)[0].getElementsByTagName("div");switch(t){case p.css.decadesContainer:e.setAttribute("title",this._context._options.localization.previousCentury),s.setAttribute("title",""),i.setAttribute("title",this._context._options.localization.nextCentury);break;case p.css.yearsContainer:e.setAttribute("title",this._context._options.localization.previousDecade),s.setAttribute("title",this._context._options.localization.selectDecade),i.setAttribute("title",this._context._options.localization.nextDecade);break;case p.css.monthsContainer:e.setAttribute("title",this._context._options.localization.previousYear),s.setAttribute("title",this._context._options.localization.selectYear),i.setAttribute("title",this._context._options.localization.nextYear);break;case p.css.daysContainer:e.setAttribute("title",this._context._options.localization.previousMonth),s.setAttribute("title",this._context._options.localization.selectMonth),i.setAttribute("title",this._context._options.localization.nextMonth),s.innerText=this._context._viewDate.format({month:this._context._options.localization.dayViewHeaderFormat})}s.innerText=s.getAttribute(t)}hide(){this.widget.classList.remove(p.css.show),this._isVisible&&(this._context._triggerEvent({type:p.events.hide,date:this._context._unset?null:this._context.dates.lastPicked?this._context.dates.lastPicked.clone:void 0}),this._isVisible=!1),document.removeEventListener("click",this._documentClickEvent)}toggle(){return this._isVisible?this.hide():this.show()}_dispose(){document.removeEventListener("click",this._documentClickEvent),this.widget&&(this.widget.querySelectorAll("[data-action]").forEach(t=>t.removeEventListener("click",this._actionsClickEvent)),this.widget.parentNode.removeChild(this.widget),this._widget=void 0)}_buildWidget(){const t=document.createElement("div");t.classList.add(p.css.widget);const e=document.createElement("div");e.classList.add(p.css.dateContainer),e.append(this._headTemplate,this._decadeDisplay._picker,this._yearDisplay._picker,this._monthDisplay._picker,this._dateDisplay._picker);const s=document.createElement("div");s.classList.add(p.css.timeContainer),s.appendChild(this._timeDisplay._picker),s.appendChild(this._hourDisplay._picker),s.appendChild(this._minuteDisplay._picker),s.appendChild(this._secondDisplay._picker);const i=document.createElement("div");if(i.classList.add(p.css.toolbar),i.append(...this._toolbar),this._context._options.display.inline&&t.classList.add(p.css.inline),this._context._options.display.calendarWeeks&&t.classList.add("calendarWeeks"),this._context._options.display.sideBySide&&this._hasDate&&this._hasTime){t.classList.add(p.css.sideBySide),"top"===this._context._options.display.toolbarPlacement&&t.appendChild(i);const n=document.createElement("div");return n.classList.add("td-row"),e.classList.add("td-half"),s.classList.add("td-half"),n.appendChild(e),n.appendChild(s),t.appendChild(n),"bottom"===this._context._options.display.toolbarPlacement&&t.appendChild(i),void(this._widget=t)}"top"===this._context._options.display.toolbarPlacement&&t.appendChild(i),this._hasDate&&(this._hasTime&&(e.classList.add(p.css.collapse),"clock"!==this._context._options.display.viewMode&&e.classList.add(p.css.show)),t.appendChild(e)),this._hasTime&&(this._hasDate&&(s.classList.add(p.css.collapse),"clock"===this._context._options.display.viewMode&&s.classList.add(p.css.show)),t.appendChild(s)),"bottom"===this._context._options.display.toolbarPlacement&&t.appendChild(i);const a=document.createElement("div");a.classList.add("arrow"),a.setAttribute("data-popper-arrow",""),t.appendChild(a),this._widget=t}get _hasTime(){return this._context._options.display.components.clock&&(this._context._options.display.components.hours||this._context._options.display.components.minutes||this._context._options.display.components.seconds)}get _hasDate(){return this._context._options.display.components.calendar&&(this._context._options.display.components.year||this._context._options.display.components.month||this._context._options.display.components.date)}get _toolbar(){const s=[];if(this._context._options.display.buttons.today){const t=document.createElement("div");t.setAttribute("data-action",u.today),t.setAttribute("title",this._context._options.localization.today),t.appendChild(this._iconTag(this._context._options.display.icons.today)),s.push(t)}if(!this._context._options.display.sideBySide&&this._hasDate&&this._hasTime){let t,e;e="clock"===this._context._options.display.viewMode?(t=this._context._options.localization.selectDate,this._context._options.display.icons.date):(t=this._context._options.localization.selectTime,this._context._options.display.icons.time);const i=document.createElement("div");i.setAttribute("data-action",u.togglePicker),i.setAttribute("title",t),i.appendChild(this._iconTag(e)),s.push(i)}if(this._context._options.display.buttons.clear){const e=document.createElement("div");e.setAttribute("data-action",u.clear),e.setAttribute("title",this._context._options.localization.clear),e.appendChild(this._iconTag(this._context._options.display.icons.clear)),s.push(e)}if(this._context._options.display.buttons.close){const a=document.createElement("div");a.setAttribute("data-action",u.close),a.setAttribute("title",this._context._options.localization.close),a.appendChild(this._iconTag(this._context._options.display.icons.close)),s.push(a)}return s}get _headTemplate(){const t=document.createElement("div");t.classList.add(p.css.calendarHeader);const e=document.createElement("div");e.classList.add(p.css.previous),e.setAttribute("data-action",u.previous),e.appendChild(this._iconTag(this._context._options.display.icons.previous));const s=document.createElement("div");s.classList.add(p.css.switch),s.setAttribute("data-action",u.pickerSwitch);const i=document.createElement("div");return i.classList.add(p.css.next),i.setAttribute("data-action",u.next),i.appendChild(this._iconTag(this._context._options.display.icons.next)),t.append(e,s,i),t}_iconTag(t){if("sprites"===this._context._options.display.icons.type){const s=document.createElement("svg");return s.innerHTML=`<use xlink:href='${t}'></use>`,s}var e=document.createElement("i");return DOMTokenList.prototype.add.apply(e.classList,t.split(" ")),e}_rebuild(){var t=this._isVisible;t&&this.hide(),this._dispose(),t&&this.show()}}class D{constructor(t){this._context=t}isValid(e,t){var s;if(0<this._context._options.restrictions.disabledDates.length&&this._isInDisabledDates(e))return!1;if(0<this._context._options.restrictions.enabledDates.length&&!this._isInEnabledDates(e))return!1;if(0<(null===(s=this._context._options.restrictions.daysOfWeekDisabled)||void 0===s?void 0:s.length)&&-1!==this._context._options.restrictions.daysOfWeekDisabled.indexOf(e.weekDay))return!1;if(this._context._options.restrictions.minDate&&e.isBefore(this._context._options.restrictions.minDate,t))return!1;if(this._context._options.restrictions.maxDate&&e.isAfter(this._context._options.restrictions.maxDate,t))return!1;if(t===h.hours||t===h.minutes||t===h.seconds){if(0<this._context._options.restrictions.disabledHours.length&&this._isInDisabledHours(e))return!1;if(0<this._context._options.restrictions.enabledHours.length&&!this._isInEnabledHours(e))return!1;if(0<this._context._options.restrictions.disabledTimeIntervals.length)for(let t=0;t<this._context._options.restrictions.disabledTimeIntervals.length;t++)if(e.isBetween(this._context._options.restrictions.disabledTimeIntervals[t].from,this._context._options.restrictions.disabledTimeIntervals[t].to))return!1}return!0}_isInDisabledDates(t){if(!this._context._options.restrictions.disabledDates||0===this._context._options.restrictions.disabledDates.length)return!1;const e=t.format(l.getFormatByUnit(h.date));return this._context._options.restrictions.disabledDates.map(t=>t.format(l.getFormatByUnit(h.date))).find(t=>t===e)}_isInEnabledDates(t){if(!this._context._options.restrictions.enabledDates||0===this._context._options.restrictions.enabledDates.length)return!0;const e=t.format(l.getFormatByUnit(h.date));return this._context._options.restrictions.enabledDates.map(t=>t.format(l.getFormatByUnit(h.date))).find(t=>t===e)}_isInDisabledHours(t){if(!this._context._options.restrictions.disabledHours||0===this._context._options.restrictions.disabledHours.length)return!1;const e=t.hours;return this._context._options.restrictions.disabledHours.find(t=>t===e)}_isInEnabledHours(t){if(!this._context._options.restrictions.enabledHours||0===this._context._options.restrictions.enabledHours.length)return!0;const e=t.hours;return this._context._options.restrictions.enabledHours.find(t=>t===e)}}class k{static _mergeOptions(t,e){var s={};let r="";const d=(n,t,e,s)=>{switch(n){case"viewDate":var i=this._dateConversion(t,"viewDate");if(void 0!==i)return i;p.errorMessages.typeMismatch("viewDate",e,"DateTime or Date");case"minDate":if(void 0===t)return t;var a=this._dateConversion(t,"restrictions.minDate");if(void 0!==a)return a;p.errorMessages.typeMismatch("restrictions.minDate",e,"DateTime or Date");case"maxDate":if(void 0===t)return t;a=this._dateConversion(t,"restrictions.maxDate");if(void 0!==a)return a;p.errorMessages.typeMismatch("restrictions.maxDate",e,"DateTime or Date");case"disabledHours":return void 0===t?[]:(this._typeCheckNumberArray("restrictions.disabledHours",t,e),0<t.filter(t=>t<0||24<t).length&&p.errorMessages.numbersOutOfRage("restrictions.disabledHours",0,23),t);case"enabledHours":return void 0===t?[]:(this._typeCheckNumberArray("restrictions.enabledHours",t,e),0<t.filter(t=>t<0||24<t).length&&p.errorMessages.numbersOutOfRage("restrictions.enabledHours",0,23),t);case"daysOfWeekDisabled":return void 0===t?[]:(this._typeCheckNumberArray("restrictions.daysOfWeekDisabled",t,e),0<t.filter(t=>t<0||6<t).length&&p.errorMessages.numbersOutOfRage("restrictions.daysOfWeekDisabled",0,6),t);case"enabledDates":return void 0===t?[]:(this._typeCheckDateArray("restrictions.enabledDates",t,e),t);case"disabledDates":return void 0===t?[]:(this._typeCheckDateArray("restrictions.disabledDates",t,e),t);case"disabledTimeIntervals":if(void 0===t)return[];Array.isArray(t)||p.errorMessages.typeMismatch(n,e,"array of { from: DateTime|Date, to: DateTime|Date }");const o=t;for(let a=0;a<o.length;a++)Object.keys(o[a]).forEach(t=>{var e=`${n}[${a}].${t}`,s=o[a][t],i=this._dateConversion(s,e);i||p.errorMessages.typeMismatch(e,typeof s,"DateTime or Date"),o[a][t]=i});return o;case"toolbarPlacement":case"type":case"viewMode":case"dayViewHeaderFormat":const c={toolbarPlacement:["top","bottom","default"],type:["icons","sprites"],viewMode:["clock","calendar","months","years","decades"],dayViewHeaderFormat:["numeric","2-digit","long","short","narrow"]}[n];return c.includes(t)||p.errorMessages.unexpectedOptionValue(r.substring(1),t,c),t;case"inputFormat":return t;default:switch(s){case"boolean":return"true"===t||!0===t;case"number":return+t;case"string":return t.toString();case"object":return{};case"function":return t;default:p.errorMessages.typeMismatch(r.substring(1),e,s)}}},l=(n,o,c)=>{const t=Object.keys(n).filter(t=>!Object.keys(o).includes(t));if(0<t.length){const i=k._flattenDefaultOptions();var e=t.map(e=>{let t=`"${r.substring(1)}.${e}" in not a known option.`;var s=i.find(t=>t.includes(e));return s&&(t+=`Did you mean "${s}"?`),t});p.errorMessages.unexpectedOptions(e)}Object.keys(o).forEach(t=>{var e=o[t],s=typeof n[t],i=typeof e;let a=n[t];if(!n.hasOwnProperty(t)){if("undefined"==i||0===(null===a||void 0===a?void 0:a.length)&&Array.isArray(e))return void(c[t]=e);n[t]=e,a=n[t]}r+=`.${t}`,c[t]=d(t,a,s,i),r=("object"==typeof e&&"inputFormat"!==t&&(Array.isArray(n[t])||(l(n[t],e,c[t]),r=r.substring(0,r.lastIndexOf(`.${t}`)))),r.substring(0,r.lastIndexOf(`.${t}`)))})};return l(t,e,s),s}static _dataToOptions(t,i){const a=t.dataset;if(!a||0===Object.keys(a).length||a.constructor!==DOMStringMap)return i;let n={};const o=t=>{const e={};return Object.keys(t).forEach(t=>{e[t.toLowerCase()]=t}),e},c=(t,e,s,i)=>{var a=o(s)[t[e].toLowerCase()];const n={};return void 0===a||(s[a].constructor===Object?(e++,n[a]=c(t,e,s[a],i)):n[a]=i),n},r=o(i);return Object.keys(a).filter(t=>t.startsWith(p.dataKey)).map(t=>t.substring(2)).forEach(t=>{let e=r[t.toLowerCase()];if(t.includes("_")){const s=t.split("_");e=r[s[0].toLowerCase()],void 0!==e&&i[e].constructor===Object&&(n[e]=c(s,1,i[e],a[`td${t}`]))}else void 0!==e&&(n[e]=a[`td${t}`])}),this._mergeOptions(n,i)}static _dateTypeCheck(t){if("DateTime"===t.constructor.name)return t;if("Date"===t.constructor.name)return _.convert(t);if("string"!=typeof t)return null;t=new _(t);return"null"===JSON.stringify(t)?null:t}static _typeCheckDateArray(e,s,t){Array.isArray(s)||p.errorMessages.typeMismatch(e,t,"array of DateTime or Date");for(let t=0;t<s.length;t++){var i=s[t],a=this._dateConversion(i,e);a||p.errorMessages.typeMismatch(e,typeof i,"DateTime or Date"),s[t]=a}}static _typeCheckNumberArray(t,e,s){Array.isArray(e)&&!e.find(t=>"number"!=typeof t)||p.errorMessages.typeMismatch(t,s,"array of numbers")}static _dateConversion(t,e){"string"==typeof t&&p.errorMessages.dateString();var s=this._dateTypeCheck(t);return s||p.errorMessages.failedToParseDate(e,t),s}static _flattenDefaultOptions(){const i=(t,s=[])=>Array.isArray(t)?[]:Object(t)===t?Object.entries(t).flatMap(([t,e])=>i(e,[...s,t])):s.join(".");return i(n)}static _validateConflcits(t){t.restrictions.minDate&&t.restrictions.maxDate&&(t.restrictions.minDate.isAfter(t.restrictions.maxDate)&&p.errorMessages.conflictingConfiguration("minDate is after maxDate"),t.restrictions.maxDate.isBefore(t.restrictions.minDate)&&p.errorMessages.conflictingConfiguration("maxDate is before minDate"))}}t.DateTime=_,t.DefaultOptions=n,t.Namespace=p,t.TempusDominus=class{constructor(t,e={}){this._currentViewMode=0,this._subscribers={},this._minViewModeNumber=0,this._isDisabled=!1,this._notifyChangeEventContext=0,this._viewDate=new _,this._inputChangeEvent=()=>{var t=k._dateTypeCheck(this._input.value);t?this.dates._setValue(t):this._triggerEvent({type:p.events.error,reason:p.errorMessages.failedToParseInput,date:t})},this._toggleClickEvent=()=>{this.toggle()},t||p.errorMessages.mustProvideElement,this._element=t,this._options=this._initializeOptions(e,n,!0),this._viewDate.setLocale(this._options.localization.locale),this._unset=!0,this._display=new w(this),this._validation=new D(this),this.dates=new l(this),this._action=new c(this),this._initializeInput(),this._initializeToggle(),this._options.display.inline&&this._display.show()}get viewDate(){return this._viewDate}updateOptions(t,e=!1){this._options=e?this._initializeOptions(t,n):this._initializeOptions(t,this._options),this._display._rebuild()}toggle(){this._isDisabled||this._display.toggle()}show(){this._isDisabled||this._display.show()}hide(){this._display.hide()}disable(){var t;this._isDisabled=!0,null!==(t=this._input)&&void 0!==t&&t.setAttribute("disabled","disabled"),this._display.hide()}enable(){var t;this._isDisabled=!1,null!==(t=this._input)&&void 0!==t&&t.removeAttribute("disabled")}clear(){this.dates.clear()}subscribe(e,t){"string"==typeof e&&(e=[e]);let s=[];s=Array.isArray(t)?t:[t],e.length!==s.length&&p.errorMessages.subscribeMismatch;const i=[];for(let t=0;t<e.length;t++){var a=e[t];if(Array.isArray(this._subscribers[a])||(this._subscribers[a]=[]),this._subscribers[a].push(s[t]),i.push({unsubscribe:this._unsubscribe.bind(this,a,this._subscribers[a].length-1)}),1===e.length)return i[0]}return i}dispose(){var t,e;this._display.hide(),this._display._dispose(),null!==(t=this._input)&&void 0!==t&&t.removeEventListener("change",this._inputChangeEvent),this._options.allowInputToggle&&null!==(e=this._input)&&void 0!==e&&e.removeEventListener("click",this._toggleClickEvent),this._toggle.removeEventListener("click",this._toggleClickEvent),this._subscribers={}}_triggerEvent(e){if(e&&e.hasOwnProperty("date")){const{date:t,oldDate:s,isClear:i}=e;if(this._notifyChangeEventContext++,t&&s&&t.isSame(s)||!i&&!t&&!s||1<this._notifyChangeEventContext)return void(this._notifyChangeEventContext=0);this._handleAfterChangeEvent(e)}if(this._element.dispatchEvent(new CustomEvent(e.type,{detail:e})),window.jQuery){const a=window.jQuery;a(this._element).trigger(e)}Array.isArray(this._subscribers[e.type])&&this._subscribers[e.type].forEach(t=>{t(e)}),this._notifyChangeEventContext=0}_viewUpdate(t){this._triggerEvent({type:p.events.update,change:t,viewDate:this._viewDate.clone})}_unsubscribe(t,e){this._subscribers[t].splice(e,1)}_initializeOptions(e,t,s=!1){var i;return e=k._mergeOptions(e,t),s&&(e=k._dataToOptions(this._element,e)),k._validateConflcits(e),e.viewDate=e.viewDate.setLocale(e.localization.locale),this._viewDate.isSame(e.viewDate)||(this._viewDate=e.viewDate),e.display.components.year&&(this._minViewModeNumber=2),e.display.components.month&&(this._minViewModeNumber=1),e.display.components.date&&(this._minViewModeNumber=0),this._currentViewMode=Math.max(this._minViewModeNumber,this._currentViewMode),m[this._currentViewMode].name!==e.display.viewMode&&(this._currentViewMode=Math.max(m.findIndex(t=>t.name===e.display.viewMode),this._minViewModeNumber)),void 0===e.display.inputFormat&&(i=e.display.components,e.display.inputFormat={year:i.calendar&&i.year?"numeric":void 0,month:i.calendar&&i.month?"2-digit":void 0,day:i.calendar&&i.date?"2-digit":void 0,hour:i.clock&&i.hours?i.useTwentyfourHour?"2-digit":"numeric":void 0,minute:i.clock&&i.minutes?"2-digit":void 0,second:i.clock&&i.seconds?"2-digit":void 0,hour12:!i.useTwentyfourHour}),null!==(i=this._display)&&void 0!==i&&i.isVisible&&this._display._update("all"),e}_initializeInput(){var t,e;"INPUT"==this._element.tagName?this._input=this._element:(e=this._element.dataset.tdTargetInput,this._input=null==e||"nearest"==e?this._element.querySelector("input"):this._element.querySelector(e)),null!==(e=this._input)&&void 0!==e&&e.addEventListener("change",this._inputChangeEvent),this._options.allowInputToggle&&null!==(t=this._input)&&void 0!==t&&t.addEventListener("click",this._toggleClickEvent)}_initializeToggle(){if(!this._options.display.inline){let t=this._element.dataset.tdTargetToggle;"nearest"==t&&(t='[data-td-toggle="datetimepicker"]'),this._toggle=null==t?this._element:this._element.querySelector(t),this._toggle.addEventListener("click",this._toggleClickEvent)}}_handleAfterChangeEvent(t){var e,s;!this._options.promptTimeOnDateChange||this._options.display.inline||this._options.display.sideBySide||!this._display._hasTime||null!==(e=this._display.widget)&&void 0!==e&&e.getElementsByClassName(p.css.show)[0].classList.contains(p.css.timeContainer)||!t.oldDate&&this._options.useCurrent||t.oldDate&&null!==(s=t.date)&&void 0!==s&&s.isSame(t.oldDate)||(clearTimeout(this._currentPromptTimeTimeout),this._currentPromptTimeTimeout=setTimeout(()=>{this._display.widget&&this._action.do({currentTarget:this._display.widget.querySelector(`.${p.css.switch} div`)},u.togglePicker)},this._options.promptTimeOnDateChangeTransitionDelay))}},Object.defineProperty(t,"__esModule",{value:!0})});